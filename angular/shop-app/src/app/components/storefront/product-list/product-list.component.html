<div class="content" fxLayout="row wrap" fxLayoutGap="grid">
  <div
    fxFlex="25%"
    class="grid-tile"
    fxFlex.xs="100%"
    fxFlex.sm="33%"
    *ngFor="let product of products"
  >
    <mat-card class="mat-elevation-z4">
      <mat-card-header>
        <mat-card-title>{{ product.name }}</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p>Available Stock: {{ product.stock }}</p>
        <p>In Cart: {{ cartItems[product.id] || 0 }}</p>
      </mat-card-content>
      <mat-card-actions>
        <button
          *ngIf="(cartItems[product.id] || 0) < product.stock"
          (click)="addToCart(product)"
          mat-button
        >
          Add To Cart
        </button>
        <button
          *ngIf="cartItems[product.id] >= product.stock || product.stock == 0"
          disabled
          mat-button
        >
          Out of Stock
        </button>
      </mat-card-actions>
    </mat-card>
  </div>
</div>
